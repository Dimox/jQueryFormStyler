/* jQuery Form Styler v1.2 | (c) Dimox | http://dimox.name/jquery-form-styler/ */
(function(c){c.fn.styler=function(k){k=c.extend({browseText:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",zIndex:"1000"},k);return this.each(function(){var a=c(this);a.is(":checkbox")?a.css({position:"absolute",left:-9999}).each(function(){if(1>a.next("span.checkbox").length){var b=c('<span class="checkbox" style="display:inline-block"><span></span></span>');a.after(b);a.is(":checked")&&b.addClass("checked");a.is(":disabled")&&b.addClass("disabled");b.click(function(){if(!b.is(".disabled"))return a.is(":checked")?
(a.removeAttr("checked"),b.removeClass("checked")):(a.attr("checked",!0),b.addClass("checked")),a.change(),!1});a.parent("label").add('label[for="'+a.attr("id")+'"]').click(function(a){b.click();a.preventDefault()});a.change(function(){a.is(":checked")?b.addClass("checked"):b.removeClass("checked")}).keydown(function(c){a.parent("label").length&&(13==c.which||32==c.which)&&b.click()}).focus(function(){b.is(".disabled")||b.addClass("focused")}).blur(function(){b.removeClass("focused")});a.on("refresh",
function(){a.is(":checked")?b.addClass("checked"):b.removeClass("checked");a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is(":radio")?a.css({position:"absolute",zIndex:"-5"}).each(function(){if(1>a.next("span.radio").length){var b=c('<span class="radio" style="display:inline-block"><span></span></span>');a.after(b);a.is(":checked")&&b.addClass("checked");a.is(":disabled")&&b.addClass("disabled");b.click(function(){if(!b.is(".disabled"))return c('input[name="'+a.attr("name")+
'"]').removeAttr("checked").next().removeClass("checked"),a.attr("checked",!0).next().addClass("checked"),a.change(),!1});a.parent("label").add('label[for="'+a.attr("id")+'"]').click(function(a){b.click();a.preventDefault()});a.change(function(){c('input[name="'+a.attr("name")+'"]').next().removeClass("checked");a.next().addClass("checked")}).focus(function(){b.is(".disabled")||b.addClass("focused")}).blur(function(){b.removeClass("focused")});a.on("refresh",function(){a.is(":checked")&&(c('input[name="'+
a.attr("name")+'"]').next().removeClass("checked"),b.addClass("checked"));a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is(":file")?a.css({position:"absolute",left:-9999}).each(function(){if(1>a.next("span.file").length){var b=c('<span class="file" style="display:inline-block"></span>'),j=c('<input class="name" type="text" readonly="readonly" style="float:left">').appendTo(b);c('<div class="browse" style="float:left">'+k.browseText+"</div>").appendTo(b);a.after(b);a.is(":disabled")&&
b.addClass("disabled");a.not(":disabled")&&(b.on("click",function(){a.click()}),a.change(function(){j.val(a.val().replace(/.+[\\\/]/,""))}));a.on("refresh",function(){a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is("select")&&a.each(function(){if(1>a.next("span.jqselect").length){var b=function(){var b=c('<span class="selectbox jqselect" style="display:inline-block;position:relative;z-index:'+k.zIndex+'"><div class="select" style="float:left"><div class="text"></div><b class="trigger"><i class="arrow"></i></b></div></span>');
a.after(b).css({position:"absolute",left:-9999});var h=b.find("div.select"),f=b.find("div.text"),d=a.find("option"),g=d.filter(":selected");g.length?f.text(g.text()):f.text(d.filter(":first").text());if(a.is(":disabled"))b.addClass("disabled");else{g="";for(i=0;i<d.length;i++){var n="";"undefined"!==typeof d.eq(i).attr("selected")&&!1!==d.eq(i).attr("selected")&&(n=' class="selected sel"');d.eq(i).is(":disabled")&&(n=' class="disabled"');g+="<li"+n+">"+d.eq(i).text()+"</li>"}var e=c('<div class="dropdown" style="position:absolute;overflow:auto;overflow-x:hidden"><ul style="list-style:none">'+
g+"</ul></div>").hide();b.append(e);var m=e.find("li"),p=b.outerHeight();"auto"==e.css("left")&&e.css({left:0});"auto"==e.css("top")&&e.css({top:p});var l=m.outerHeight(),j=e.css("top");h.click(function(){var a=b.offset().top,d=c(window).height()-p-(a-c(window).scrollTop());0>d||d<6*l?(e.height("auto").css({top:"auto",bottom:j}),e.outerHeight()>a-c(window).scrollTop()-20&&e.height(Math.floor((a-c(window).scrollTop()-20)/l)*l)):d>6*l&&(e.height("auto").css({bottom:"auto",top:j}),e.outerHeight()>d-
20&&e.height(Math.floor((d-20)/l)*l));c("span.selectbox").css({zIndex:k.zIndex-1}).removeClass("focused");b.css({zIndex:k.zIndex});e.is(":hidden")?(c("div.dropdown:visible").hide(),e.show()):e.hide();return!1});m.hover(function(){c(this).siblings().removeClass("selected")});var q=m.filter(".selected").text();m.filter(":not(.disabled)").click(function(){var b=c(this).text();q!=b&&(c(this).addClass("selected sel").siblings().removeClass("selected sel"),d.removeAttr("selected").eq(c(this).index()).attr("selected",
!0),q=b,f.text(b),a.change());e.hide()});e.mouseout(function(){e.find("li.sel").addClass("selected")});a.focus(function(){c("span.selectbox").removeClass("focused");b.addClass("focused")}).keyup(function(){f.text(d.filter(":selected").text());m.removeClass("selected sel").eq(d.filter(":selected").index()).addClass("selected sel")});c(document).on("click",function(a){c(a.target).parents().hasClass("selectbox")||(e.hide().find("li.sel").addClass("selected"),b.removeClass("focused"))})}},j=function(){var b=
c('<span class="selectMultiple jqselect" style="display:inline-block"></span>');a.after(b).css({position:"absolute",left:-9999});var h=a.find("option"),f="";for(i=0;i<h.length;i++){var d="";"undefined"!==typeof h.eq(i).attr("selected")&&!1!==h.eq(i).attr("selected")&&(d=' class="selected"');h.eq(i).is(":disabled")&&(d=' class="disabled"');h.eq(i).is(":selected:disabled")&&(d=' class="selected disabled"');f+="<li"+d+">"+h.eq(i).text()+"</li>"}b.append("<ul>"+f+"</ul>");var f=b.find("ul"),g=b.find("li").attr("unselectable",
"on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),d=a.attr("size"),j=f.outerHeight(),e=g.outerHeight();void 0!==d&&0<d?f.css({height:e*d}):f.css({height:4*e});j>b.height()&&f.css("overflowY","scroll").bind("mousewheel DOMMouseScroll",function(a){var b=null;"mousewheel"==a.type?b=-1*a.originalEvent.wheelDelta:"DOMMouseScroll"==a.type&&(b=40*a.originalEvent.detail);b&&(a.preventDefault(),c(this).scrollTop(b+c(this).scrollTop()))});
a.is(":disabled")?(b.addClass("disabled"),h.each(function(){c(this).is(":selected")&&g.eq(c(this).index()).addClass("selected")})):g.filter(":not(.disabled)").click(function(b){var d=c(this);b.ctrlKey||d.addClass("selected");b.shiftKey||d.addClass("first");!b.ctrlKey&&!b.shiftKey&&d.siblings().removeClass("selected first");b.ctrlKey&&(d.is(".selected")?d.removeClass("selected first"):d.addClass("selected first"),d.siblings().removeClass("first"));if(b.shiftKey){var e=next=!1;d.siblings().removeClass("selected").siblings(".first").addClass("selected");
d.prevAll().each(function(){c(this).is(".first")&&(e=!0)});d.nextAll().each(function(){c(this).is(".first")&&(next=!0)});e&&d.prevAll().each(function(){if(c(this).is(".selected"))return!1;c(this).not(".disabled").addClass("selected")});next&&d.nextAll().each(function(){if(c(this).is(".selected"))return!1;c(this).not(".disabled").addClass("selected")});1==g.filter(".selected").length&&d.addClass("first")}h.removeAttr("selected");g.filter(".selected").each(function(){h.eq(c(this).index()).attr("selected",
!0)});a.change()})};a.is("[multiple]")?j():b();a.on("refresh",function(){a.next().remove();a.is("[multiple]")?j():b()})}})})}})(jQuery);