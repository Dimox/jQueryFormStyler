/* jQuery Form Styler v1.4.7 | (c) Dimox | https://github.com/Dimox/jQueryFormStyler */
!function(a){a.fn.styler=function(b){var b=a.extend({idSuffix:"-styler",filePlaceholder:"\u0424\u0430\u0439\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",fileBrowse:"\u041e\u0431\u0437\u043e\u0440...",selectSearch:!0,selectSearchLimit:10,selectSearchNotFound:"\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",selectSearchPlaceholder:"\u041f\u043e\u0438\u0441\u043a...",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0,wrapper:"form"},b);return this.each(function(){function d(){var a="",d="",e="",f="";void 0!==c.attr("id")&&""!=c.attr("id")&&(a=' id="'+c.attr("id")+b.idSuffix+'"'),void 0!==c.attr("title")&&""!=c.attr("title")&&(d=' title="'+c.attr("title")+'"'),void 0!==c.attr("class")&&""!=c.attr("class")&&(e=" "+c.attr("class"));var g=c.data();for(var h in g)""!=g[h]&&(f+=" data-"+h+'="'+g[h]+'"');a+=f,this.id=a,this.title=d,this.classes=e}var c=a(this);c.is(":checkbox")?c.each(function(){function b(){var b=new d,e=a("<div"+b.id+' class="jq-checkbox'+b.classes+'"'+b.title+'><div class="jq-checkbox__div"></div></div>');c.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(e).prependTo(e),e.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"}),c.is(":checked")&&e.addClass("checked"),c.is(":disabled")&&e.addClass("disabled"),e.click(function(){return e.is(".disabled")?!1:(c.is(":checked")?(c.prop("checked",!1),e.removeClass("checked")):(c.prop("checked",!0),e.addClass("checked")),c.change(),!1)}),c.closest("label").add('label[for="'+c.attr("id")+'"]').click(function(a){e.click(),a.preventDefault()}),c.change(function(){c.is(":checked")?e.addClass("checked"):e.removeClass("checked")}).keydown(function(a){(13==a.which||32==a.which)&&e.click()}).focus(function(){e.is(".disabled")||e.addClass("focused")}).blur(function(){e.removeClass("focused")})}c.parent("div.jq-checkbox").length<1&&(b(),c.on("refresh",function(){c.parent().before(c).remove(),b()}))}):c.is(":radio")?c.each(function(){function e(){var e=new d,f=a("<div"+e.id+' class="jq-radio'+e.classes+'"'+e.title+'><div class="jq-radio__div"></div></div>');c.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(f).prependTo(f),f.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"}),c.is(":checked")&&f.addClass("checked"),c.is(":disabled")&&f.addClass("disabled"),f.click(function(){return f.is(".disabled")?!1:(f.closest(b.wrapper).find('input[name="'+c.attr("name")+'"]').prop("checked",!1).parent().removeClass("checked"),c.prop("checked",!0).parent().addClass("checked"),c.change(),!1)}),c.closest("label").add('label[for="'+c.attr("id")+'"]').click(function(a){f.click(),a.preventDefault()}),c.change(function(){c.parent().addClass("checked")}).focus(function(){f.is(".disabled")||f.addClass("focused")}).blur(function(){f.removeClass("focused")})}c.parent("div.jq-radio").length<1&&(e(),c.on("refresh",function(){c.parent().before(c).remove(),e()}))}):c.is(":file")?c.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",opacity:0,margin:0,padding:0}).each(function(){function e(){var e=new d,f=a("<div"+e.id+' class="jq-file'+e.classes+'"'+e.title+' style="display: inline-block; position: relative; overflow: hidden"></div>'),g=a('<div class="jq-file__name">'+b.filePlaceholder+"</div>").appendTo(f);a('<div class="jq-file__browse">'+b.fileBrowse+"</div>").appendTo(f),c.after(f),f.append(c),c.is(":disabled")&&f.addClass("disabled"),c.change(function(){g.text(c.val().replace(/.+[\\\/]/,""))}).focus(function(){f.addClass("focused")}).blur(function(){f.removeClass("focused")}).click(function(){f.removeClass("focused")})}c.parent("div.jq-file").length<1&&(e(),c.on("refresh",function(){c.parent().before(c).remove(),e()}))}):c.is("select")?c.each(function(){function e(){function e(b){b.unbind("mousewheel DOMMouseScroll").bind("mousewheel DOMMouseScroll",function(b){var c=null;"mousewheel"==b.type?c=-1*b.originalEvent.wheelDelta:"DOMMouseScroll"==b.type&&(c=40*b.originalEvent.detail),c&&(b.preventDefault(),a(this).scrollTop(c+a(this).scrollTop()))})}function h(){for(i=0,len=f.length;len>i;i++){var a="",b="",c="",d="",e="",h="",j="disabled",k="selected sel disabled";f.eq(i).prop("selected")&&(b="selected sel"),f.eq(i).is(":disabled")&&(b=j),f.eq(i).is(":selected:disabled")&&(b=k),void 0!==f.eq(i).attr("class")&&(d=" "+f.eq(i).attr("class"),h=' data-jqfs-class="'+f.eq(i).attr("class")+'"');var l=f.eq(i).data();for(var m in l)""!=l[m]&&(c+=" data-"+m+'="'+l[m]+'"');a="<li"+h+c+' class="'+b+d+'">'+f.eq(i).text()+"</li>",f.eq(i).parent().is("optgroup")&&(void 0!==f.eq(i).parent().attr("class")&&(e=" "+f.eq(i).parent().attr("class")),a="<li"+h+' class="'+b+d+" option"+e+'">'+f.eq(i).text()+"</li>",f.eq(i).is(":first-child")&&(a='<li class="optgroup'+e+'">'+f.eq(i).parent().attr("label")+"</li>"+a)),g+=a}}function j(){var i=new d,j=a("<div"+i.id+' class="jq-selectbox jqselect'+i.classes+'" style="display: inline-block; position: relative; z-index:'+b.singleSelectzIndex+'">'+'<div class="jq-selectbox__select"'+i.title+">"+'<div class="jq-selectbox__select-text"></div>'+'<div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div>'+"</div>"+"</div>");c.css({margin:0,padding:0}).wrap('<div class="jq-selectbox-wrapper" style="display: inline-block; position: relative;"></div>').after(j);var k=c.clone().appendTo("body"),l=k.width();k.remove(),l!=c.width()&&c.parent().css("display","block");var m=a("div.jq-selectbox__select",j),n=a("div.jq-selectbox__select-text",j),o=f.filter(":selected");o.length?n.text(o.text()):n.text(f.first().text()),h();var p="";b.selectSearch&&(p='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+b.selectSearchPlaceholder+'"></div>'+'<div class="jq-selectbox__not-found">'+b.selectSearchNotFound+"</div>");var q=a('<div class="jq-selectbox__dropdown" style="position: absolute">'+p+'<ul style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+g+"</ul>"+"</div>");j.append(q);var r=a("ul",q),s=a("li",q),t=a("input",q),u=a("div.jq-selectbox__not-found",q).hide();s.length<b.selectSearchLimit&&t.parent().hide();var v=0;s.each(function(){a(this).css({display:"inline-block","white-space":"nowrap"}),a(this).width()>v&&(v=a(this).width()),a(this).css({display:"block","white-space":"normal"})}),j.width(c.outerWidth()),v>q.width()&&q.width(v+q.width()-s.width()),c.css({position:"absolute",opacity:0,height:j.outerHeight()});var w=j.outerHeight(),x=t.outerHeight(),y=r.css("max-height"),z=s.filter(".selected");z.length<1&&s.first().addClass("selected sel");var A=s.outerHeight(),B=q.css("top");if("auto"==q.css("left")&&q.css({left:0}),"auto"==q.css("top")&&q.css({top:w}),q.hide(),z.length&&(f.first().text()!=o.text()&&j.addClass("changed"),j.data("jqfs-class",z.data("jqfs-class")),j.addClass(z.data("jqfs-class"))),c.is(":disabled"))return j.addClass("disabled"),!1;m.click(function(){function m(){r.css("max-height",Math.floor((h-20-x)/A)*A)}function n(){h<q.outerHeight()+20&&m()}function o(){r.css("max-height",Math.floor((g-f.scrollTop()-20-x)/A)*A)}function p(){g-f.scrollTop()-20<q.outerHeight()+20&&o()}c.focus();var d=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;if(!d){if(b.selectSmartPositioning){var f=a(window),g=j.offset().top,h=f.height()-w-(g-f.scrollTop()),i=b.selectVisibleOptions,k=5*A,l=A*i;i>0&&6>i&&(k=l),h>k+x+20?(q.height("auto").css({bottom:"auto",top:B}),m(),i>0&&6>i?r.css("max-height",l):i>6?(r.css("max-height",l),n()):"none"!=y&&(r.css("max-height",y),n())):(q.height("auto").css({top:"auto",bottom:B}),o(),i>0&&6>i?r.css("max-height",l):i>6?(r.css("max-height",l),p()):"none"!=y&&(r.css("max-height",y),p()))}return a("div.jqselect").css({zIndex:b.singleSelectzIndex-1}).removeClass("opened focused"),j.css({zIndex:b.singleSelectzIndex}),q.is(":hidden")?(a("div.jq-selectbox__dropdown:visible").hide(),q.show(),j.addClass("opened")):(q.hide(),j.removeClass("opened")),s.filter(".selected").length&&(0!=r.innerHeight()/A%2&&(A/=2),r.scrollTop(r.scrollTop()+s.filter(".selected").position().top-r.innerHeight()/2+A)),t.length&&(t.val("").keyup(),u.hide(),t.focus().keyup(function(){var b=a(this).val();s.each(function(){a(this).html().match(new RegExp(".*?"+b+".*?","i"))?a(this).show():a(this).hide()}),s.filter(":visible").length<1?u.show():u.hide()})),e(r),!1}}),s.hover(function(){a(this).siblings().removeClass("selected")});var C=s.filter(".selected").text();s.filter(".selected").text(),s.filter(":not(.disabled):not(.optgroup)").click(function(){var b=a(this),d=b.text();if(C!=d){var e=b.index();b.is(".option")&&(e-=b.prevAll(".optgroup").length),b.addClass("selected sel").siblings().removeClass("selected sel"),f.prop("selected",!1).eq(e).prop("selected",!0),C=d,n.text(d),f.first().text()!=d?j.addClass("changed"):j.removeClass("changed"),j.data("jqfs-class")&&j.removeClass(j.data("jqfs-class")),j.data("jqfs-class",b.data("jqfs-class")),j.addClass(b.data("jqfs-class")),c.change()}t.length&&(t.val("").keyup(),u.hide()),q.hide(),j.removeClass("opened")}),q.mouseout(function(){a("li.sel",q).addClass("selected")}),c.change(function(){n.text(f.filter(":selected").text()),s.removeClass("selected sel").not(".optgroup").eq(c[0].selectedIndex).addClass("selected sel")}).focus(function(){j.addClass("focused")}).blur(function(){j.removeClass("focused")}).bind("keydown keyup",function(a){n.text(f.filter(":selected").text()),s.removeClass("selected sel").not(".optgroup").eq(c[0].selectedIndex).addClass("selected sel"),(38==a.which||37==a.which||33==a.which)&&q.scrollTop(q.scrollTop()+s.filter(".selected").position().top),(40==a.which||39==a.which||34==a.which)&&q.scrollTop(q.scrollTop()+s.filter(".selected").position().top-q.innerHeight()+A),13==a.which&&q.hide()}),a(document).on("click",function(b){a(b.target).parents().hasClass("jq-selectbox")||"OPTION"==b.target.nodeName||(t.length&&t.val("").keyup(),q.hide().find("li.sel").addClass("selected"),j.removeClass("focused opened"))})}function k(){var b=new d,i=a("<div"+b.id+' class="jq-select-multiple jqselect'+b.classes+'"'+b.title+' style="display: inline-block; position: relative"></div>');c.css({margin:0,padding:0}).wrap('<div class="jq-selectbox-wrapper" style="display: inline-block; position: relative;"></div>').after(i);var j=c.clone().appendTo("body"),k=j.width();j.remove(),k!=c.width()&&c.parent().css("display","block"),h(),i.append('<ul style="position: relative">'+g+"</ul>");var l=a("ul",i).css({"overflow-x":"hidden"}),m=a("li",i).attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none","white-space":"nowrap"}),n=c.attr("size"),o=l.outerHeight(),p=m.outerHeight();void 0!==n&&n>0?l.css({height:p*n}):l.css({height:4*p}),o>i.height()&&(l.css("overflowY","scroll"),e(l),m.filter(".selected").length&&l.scrollTop(l.scrollTop()+m.filter(".selected").position().top)),c.is(":disabled")?(i.addClass("disabled"),f.each(function(){a(this).is(":selected")&&m.eq(a(this).index()).addClass("selected")}),i.width(c.outerWidth()),i.width(i.width()-(i.outerWidth()-i.width())),c.css({position:"absolute",opacity:0,height:i.outerHeight()})):(i.width(c.outerWidth()),i.width(i.width()-(i.outerWidth()-i.width())),c.css({position:"absolute",opacity:0,height:i.outerHeight()}),m.filter(":not(.disabled):not(.optgroup)").click(function(b){c.focus(),i.removeClass("focused");var d=a(this);if(b.ctrlKey||b.metaKey||d.addClass("selected"),b.shiftKey||d.addClass("first"),b.ctrlKey||b.metaKey||b.shiftKey||d.siblings().removeClass("selected first"),(b.ctrlKey||b.metaKey)&&(d.is(".selected")?d.removeClass("selected first"):d.addClass("selected first"),d.siblings().removeClass("first")),b.shiftKey){var e=!1,g=!1;d.siblings().removeClass("selected").siblings(".first").addClass("selected"),d.prevAll().each(function(){a(this).is(".first")&&(e=!0)}),d.nextAll().each(function(){a(this).is(".first")&&(g=!0)}),e&&d.prevAll().each(function(){return a(this).is(".selected")?!1:(a(this).not(".disabled, .optgroup").addClass("selected"),void 0)}),g&&d.nextAll().each(function(){return a(this).is(".selected")?!1:(a(this).not(".disabled, .optgroup").addClass("selected"),void 0)}),1==m.filter(".selected").length&&d.addClass("first")}f.prop("selected",!1),m.filter(".selected").each(function(){var b=a(this),c=b.index();b.is(".option")&&(c-=b.prevAll(".optgroup").length),f.eq(c).prop("selected",!0)}),c.change()}),f.each(function(b){a(this).data("optionIndex",b)}),c.change(function(){m.removeClass("selected");var b=[];f.filter(":selected").each(function(){b.push(a(this).data("optionIndex"))}),m.not(".optgroup").filter(function(c){return a.inArray(c,b)>-1}).addClass("selected")}).focus(function(){i.addClass("focused")}).blur(function(){i.removeClass("focused")}),o>i.height()&&c.keydown(function(a){(38==a.which||37==a.which||33==a.which)&&l.scrollTop(l.scrollTop()+m.filter(".selected").position().top-p),(40==a.which||39==a.which||34==a.which)&&l.scrollTop(l.scrollTop()+m.filter(".selected:last").position().top-l.innerHeight()+2*p)}))}var f=a("option",c),g="";c.is("[multiple]")?k():j()}c.next("div.jqselect").length<1&&(e(),c.on("refresh",function(){c.parent().before(c).remove(),e()}),c.on("adaptiveWidth",function(){c.css({position:"static"}),c.next().width(c.outerWidth()),c.css({position:"absolute"})}),a(window).on("resize",function(){c.trigger("adaptiveWidth")}))}):c.is(":reset")&&c.click(function(){setTimeout(function(){c.closest(b.wrapper).find("input, select").trigger("refresh")},1)})})}}(jQuery);
