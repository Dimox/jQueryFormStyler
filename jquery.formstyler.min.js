/* jQuery Form Styler v1.3.1 | (c) Dimox | http://dimox.name/jquery-form-styler/ */
(function(d){d.fn.styler=function(l){l=d.extend({browseText:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c",singleSelectzIndex:"1000",selectVisibleOptions:0},l);return this.each(function(){var a=d(this),m=cl="";void 0!==a.attr("id")&&""!=a.attr("id")&&(m=' id="'+a.attr("id")+'"');void 0!==a.attr("class")&&""!=a.attr("class")&&(cl=" "+a.attr("class"));a.is(":checkbox")?a.css({position:"absolute",left:-9999}).each(function(){if(1>a.next("span.jq-checkbox").length){var b=d("<span"+m+' class="jq-checkbox'+
cl+'" style="display: inline-block"><span></span></span>');a.after(b);a.is(":checked")&&b.addClass("checked");a.is(":disabled")&&b.addClass("disabled");b.click(function(){if(!b.is(".disabled"))return a.is(":checked")?(a.removeAttr("checked"),b.removeClass("checked")):(a.prop("checked",!0).attr("checked","checked"),b.addClass("checked")),a.change(),!1});a.parent("label").add('label[for="'+a.attr("id")+'"]').click(function(a){b.click();a.preventDefault()});a.change(function(){a.is(":checked")?b.addClass("checked"):
b.removeClass("checked")}).keydown(function(d){a.parent("label").length&&(13==d.which||32==d.which)&&b.click()}).focus(function(){b.is(".disabled")||b.addClass("focused")}).blur(function(){b.removeClass("focused")});a.on("refresh",function(){a.is(":checked")?b.addClass("checked"):b.removeClass("checked");a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is(":radio")?a.css({position:"absolute",zIndex:"-5"}).each(function(){if(1>a.next("span.jq-radio").length){var b=d("<span"+
m+' class="jq-radio'+cl+'" style="display: inline-block"><span></span></span>');a.after(b);a.is(":checked")&&b.addClass("checked");a.is(":disabled")&&b.addClass("disabled");b.click(function(){if(!b.is(".disabled"))return d('input[name="'+a.attr("name")+'"]').removeAttr("checked").next().removeClass("checked"),a.prop("checked",!0).attr("checked","checked").next().addClass("checked"),a.change(),!1});a.parent("label").add('label[for="'+a.attr("id")+'"]').click(function(a){b.click();a.preventDefault()});
a.change(function(){d('input[name="'+a.attr("name")+'"]').next().removeClass("checked");a.next().addClass("checked")}).focus(function(){b.is(".disabled")||b.addClass("focused")}).blur(function(){b.removeClass("focused")});a.on("refresh",function(){a.is(":checked")&&(d('input[name="'+a.attr("name")+'"]').next().removeClass("checked"),b.addClass("checked"));a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is(":file")?a.css({position:"absolute",top:"-50%",right:"-50%",fontSize:"200px",
opacity:0}).each(function(){if(1>a.parent("span.jq-file").length){var b=d("<span"+m+' class="jq-file'+cl+'" style="display: inline-block; position: relative; overflow: hidden"></span>'),y=d('<div class="name" style="float: left; white-space: nowrap"></div>').appendTo(b);d('<div class="browse" style="float: left">'+l.browseText+"</div>").appendTo(b);a.after(b);b.append(a);a.is(":disabled")&&b.addClass("disabled");a.change(function(){y.text(a.val().replace(/.+[\\\/]/,""))}).focus(function(){b.addClass("focused")}).blur(function(){b.removeClass("focused")}).click(function(){b.removeClass("focused")}).on("refresh",
function(){a.is(":disabled")?b.addClass("disabled"):b.removeClass("disabled")})}}):a.is("select")&&a.each(function(){if(1>a.next("span.jqselect").length){var b=function(){function b(a){a.bind("mousewheel DOMMouseScroll",function(a){var b=null;"mousewheel"==a.type?b=-1*a.originalEvent.wheelDelta:"DOMMouseScroll"==a.type&&(b=40*a.originalEvent.detail);b&&(a.preventDefault(),d(this).scrollTop(b+d(this).scrollTop()))})}function t(){for(i=0;i<e.length;i++){var a=liClass=optgroupClass=optionClass="";"undefined"!==
typeof e.eq(i).attr("selected")&&!1!==e.eq(i).attr("selected")&&(liClass="selected sel");e.eq(i).is(":disabled")&&(liClass="disabled");e.eq(i).is(":selected:disabled")&&(liClass="selected sel disabled");void 0!==e.eq(i).attr("class")&&(optionClass=" "+e.eq(i).attr("class"));a='<li class="'+liClass+optionClass+'">'+e.eq(i).text()+"</li>";e.eq(i).parent().is("optgroup")&&(void 0!==e.eq(i).parent().attr("class")&&(optgroupClass=" "+e.eq(i).parent().attr("class")),a='<li class="'+liClass+optionClass+
" option"+optgroupClass+'">'+e.eq(i).text()+"</li>",e.eq(i).is(":first-child")&&(a='<li class="optgroup'+optgroupClass+'">'+e.eq(i).parent().attr("label")+"</li>"+a));q+=a}}var e=a.find("option"),q="";if(a.is("[multiple]")){var f=d("<span"+m+' class="jq-select-multiple jqselect'+cl+'" style="display: inline-block"></span>');a.after(f).css({position:"absolute",left:-9999});t();f.append("<ul>"+q+"</ul>");var h=f.find("ul"),p=f.find("li").attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none",
"-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),s=a.attr("size"),z=h.outerHeight(),u=p.outerHeight();void 0!==s&&0<s?h.css({height:u*s}):h.css({height:4*u});z>f.height()&&(h.css("overflowY","scroll"),b(h));a.is(":disabled")?(f.addClass("disabled"),e.each(function(){d(this).is(":selected")&&p.eq(d(this).index()).addClass("selected")})):p.filter(":not(.disabled):not(.optgroup)").click(function(b){var c=d(this);b.ctrlKey||c.addClass("selected");b.shiftKey||c.addClass("first");
!b.ctrlKey&&!b.shiftKey&&c.siblings().removeClass("selected first");b.ctrlKey&&(c.is(".selected")?c.removeClass("selected first"):c.addClass("selected first"),c.siblings().removeClass("first"));if(b.shiftKey){var g=next=!1;c.siblings().removeClass("selected").siblings(".first").addClass("selected");c.prevAll().each(function(){d(this).is(".first")&&(g=!0)});c.nextAll().each(function(){d(this).is(".first")&&(next=!0)});g&&c.prevAll().each(function(){if(d(this).is(".selected"))return!1;d(this).not(".disabled, .optgroup").addClass("selected")});
next&&c.nextAll().each(function(){if(d(this).is(".selected"))return!1;d(this).not(".disabled, .optgroup").addClass("selected")});1==p.filter(".selected").length&&c.addClass("first")}e.removeAttr("selected");p.filter(".selected").each(function(){var a=d(this),b=a.index();a.is(".option")&&(b-=a.prevAll(".optgroup").length);e.eq(b).prop("selected",!0).attr("selected","selected")});a.change()})}else{var j=d("<span"+m+' class="jq-selectbox jqselect'+cl+'" style="display: inline-block; position: relative; z-index:'+
l.singleSelectzIndex+'"><div class="select" style="float: left"><div class="text"></div><b class="trigger"><i class="arrow"></i></b></div></span>');a.after(j).css({position:"absolute",left:-9999});var f=j.find("div.select"),r=j.find("div.text"),h=e.filter(":selected");h.length?r.text(h.text()):r.text(e.filter(":first").text());if(a.is(":disabled"))j.addClass("disabled");else{t();var c=d('<div class="dropdown" style="position: absolute; overflow: auto; overflow-x: hidden"><ul style="list-style: none">'+
q+"</ul></div>");j.append(c);var k=c.find("li"),v=j.outerHeight();"auto"==c.css("left")&&c.css({left:0});"auto"==c.css("top")&&c.css({top:v});var n=k.outerHeight(),w=c.css("top");c.hide();f.click(function(){var a=j.offset().top,e=d(window).height()-v-(a-d(window).scrollTop()),g=l.selectVisibleOptions,f=6*n,h=n*g;0<g&&6>g&&(f=h);0>e||e<f?(c.height("auto").css({top:"auto",bottom:w}),c.outerHeight()>a-d(window).scrollTop()-20&&(c.height(Math.floor((a-d(window).scrollTop()-20)/n)*n),0<g&&6>g?c.height()>
f&&c.height(f):6<g&&c.height()>h&&c.height(h))):e>f&&(c.height("auto").css({bottom:"auto",top:w}),c.outerHeight()>e-20&&(c.height(Math.floor((e-20)/n)*n),0<g&&6>g?c.height()>f&&c.height(f):6<g&&c.height()>h&&c.height(h)));d("span.jqselect").css({zIndex:l.singleSelectzIndex-1}).removeClass("focused");j.css({zIndex:l.singleSelectzIndex});c.is(":hidden")?(d("div.dropdown:visible").hide(),c.show(),j.addClass("opened")):(c.hide(),j.removeClass("opened"));k.filter(".selected").length&&c.scrollTop(c.scrollTop()+
k.filter(".selected").position().top-c.innerHeight()/2+k.filter(".selected").outerHeight()/2);b(c);return!1});k.hover(function(){d(this).siblings().removeClass("selected")});var x=k.filter(".selected").text();k.filter(":not(.disabled):not(.optgroup)").click(function(){var b=d(this),f=b.text();if(x!=f){var g=b.index();b.is(".option")&&(g-=b.prevAll(".optgroup").length);b.addClass("selected sel").siblings().removeClass("selected sel");e.eq(g).prop("selected",!0).attr("selected","selected").parents().find("option").not(":selected").removeAttr("selected");
x=f;r.text(f);a.change()}c.hide()});c.mouseout(function(){c.find("li.sel").addClass("selected")});a.focus(function(){j.addClass("focused")}).blur(function(){j.removeClass("focused")}).keyup(function(){r.text(e.filter(":selected").text());k.removeClass("selected sel").eq(e.filter(":selected").index()).addClass("selected sel")});d(document).on("click",function(a){d(a.target).parents().hasClass("selectbox")||(c.hide().find("li.sel").addClass("selected"),j.removeClass("focused opened"))})}}};b();a.on("refresh",
function(){a.next().remove();b()})}})})}})(jQuery);